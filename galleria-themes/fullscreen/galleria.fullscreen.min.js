/*
 * Galleria Fullscreen Theme v. 2.2 2010-10-28
 * http://galleria.aino.se
 *
 * Copyright (c) 2010, Aino
 * Licensed under the MIT license.
 */

(function(b){Galleria.addTheme({name:"fullscreen",author:"Galleria",version:"2.2",css:"galleria.fullscreen.css",defaults:{transition:"none",image_crop:true,thumb_crop:"height",_hide_dock:true,_close_on_click:false},init:function(g){this.addElement("thumbnails-tab");this.appendChild("thumbnails-container","thumbnails-tab");var d=this.$("thumbnails-tab"),i=this.$("loader"),e=this.$("thumbnails-container"),h=this.$("thumbnails-list"),l=this.$("info-text"),j=this.$("info"),c=!g._hide_dock,f=0;if(Galleria.IE){this.addElement("iefix");
this.appendChild("container","iefix");this.$("iefix").css({zIndex:3,position:"absolute",backgroundColor:"#000",opacity:0.4})}g.thumbnails===false&&e.hide();var k=this.proxy(function(a){if(a||a.width){a=Math.min(a.width,b(window).width());l.width(a-40);Galleria.IE&&this.getOptions("show_info")&&this.$("iefix").width(j.outerWidth()).height(j.outerHeight())}});this.bind(Galleria.RESCALE,function(){f=this.getStageHeight()-d.height()-2;e.css("top",c?f-h.outerHeight()+2:f);var a=this.getActiveImage();a&&
k(a)});this.bind(Galleria.LOADSTART,function(a){a.cached||i.show().fadeTo(100,1);b(a.thumbTarget).css("opacity",1).parent().siblings().children().css("opacity",0.6)});this.bind(Galleria.LOADFINISH,function(){i.fadeOut(300);this.$("info, iefix").toggle(this.hasInfo())});this.bind(Galleria.IMAGE,function(a){k(a.imageTarget)});this.bind(Galleria.THUMBNAIL,function(a){b(a.thumbTarget).parent(":not(.active)").children().css("opacity",0.6);b(a.thumbTarget).click(function(){c&&g._close_on_click&&d.click()})});
this.trigger(Galleria.RESCALE);this.addIdleState(e,{opacity:0});this.addIdleState(this.get("info"),{opacity:0});Galleria.IE&&this.addIdleState(this.get("iefix"),{opacity:0});this.$("image-nav-left, image-nav-right").css("opacity",0.01).hover(function(){b(this).animate({opacity:1},100)},function(){b(this).animate({opacity:0})}).show();if(g._hide_dock)d.click(this.proxy(function(){d.toggleClass("open",!c);c?e.animate({top:f},400,"galleria"):e.animate({top:f-h.outerHeight()+2},400,"galleria");c=!c}));
else{this.bind(Galleria.THUMBNAIL,function(){e.css("top",f-h.outerHeight()+2)});d.css("visibility","hidden")}this.$("thumbnails").children().hover(function(){b(this).not(".active").children().stop().fadeTo(100,1)},function(){b(this).not(".active").children().stop().fadeTo(400,0.6)});this.enterFullscreen();this.attachKeyboard({escape:function(){return false},up:function(a){c||d.click();a.preventDefault()},down:function(a){c&&d.click();a.preventDefault()}})}})})(jQuery);